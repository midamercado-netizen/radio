<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de An√∫ncios com YouTube Music</title>
    <style>
        :root {
            --primary: #ff0000;
            --primary-dark: #cc0000;
            --secondary: #282828;
            --accent: #ff6b6b;
            --light: #f5f5f5;
            --dark: #333333;
            --gray: #aaaaaa;
            --success: #27ae60;
            --warning: #f39c12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #121212;
            color: var(--light);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.3);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff0000, #ff6b6b, #ff0000);
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .card {
            background: var(--secondary);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid #444;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .card h2 {
            color: var(--light);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card h2 i {
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--light);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background: #1e1e1e;
            border: 1px solid #444;
            border-radius: 6px;
            font-size: 16px;
            color: var(--light);
            transition: border 0.3s, box-shadow 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.2);
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s, transform 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-danger {
            background: #e74c3c;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #219653;
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        .btn-secondary {
            background: #555;
        }
        
        .btn-secondary:hover {
            background: #444;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .audio-controls button {
            padding: 8px 15px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #444;
        }
        
        th {
            background-color: #333;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #2a2a2a;
        }
        
        .status-active {
            color: var(--success);
            font-weight: 600;
        }
        
        .status-inactive {
            color: var(--gray);
        }
        
        .actions {
            display: flex;
            gap: 8px;
        }
        
        .actions button {
            padding: 6px 12px;
            font-size: 14px;
        }
        
        .current-time {
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
            color: var(--light);
            font-weight: 600;
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .player-container {
            background: var(--secondary);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .player-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .player-info {
            flex-grow: 1;
        }
        
        .player-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .player-artist {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .progress-container {
            width: 100%;
            height: 6px;
            background: #444;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s;
        }
        
        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .volume-slider {
            width: 100px;
        }
        
        .search-results {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid #444;
            border-radius: 6px;
            background: #1e1e1e;
        }
        
        .search-result {
            padding: 12px 15px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background 0.2s;
        }
        
        .search-result:hover {
            background: #2a2a2a;
        }
        
        .search-result img {
            width: 50px;
            height: 50px;
            border-radius: 4px;
            object-fit: cover;
        }
        
        .search-result-info {
            flex-grow: 1;
        }
        
        .search-result-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .search-result-artist {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .playing-now {
            background: linear-gradient(135deg, var(--primary), #e74c3c);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: 600;
            display: none;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }
        
        .test-panel {
            background: #1e1e1e;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }
        
        .test-panel.active {
            display: block;
        }
        
        .youtube-player {
            width: 100%;
            height: 300px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
        
        .youtube-player.active {
            display: block;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray);
            border-top: 1px solid #444;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .audio-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .player-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .volume-container {
                width: 100%;
                justify-content: space-between;
            }
            
            .volume-slider {
                width: 150px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <i class="fab fa-youtube logo-icon"></i>
                <h1>Sistema de An√∫ncios com YouTube</h1>
            </div>
            <p class="subtitle">Toque m√∫sicas do YouTube e fa√ßa an√∫ncios quando quiser</p>
        </div>
    </header>
    
    <div class="container">
        <div class="current-time" id="current-time">Carregando...</div>
        
        <div class="playing-now" id="playing-now">
            <i class="fas fa-music"></i> Reproduzindo agora: <span id="current-audio"></span>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-sliders-h"></i> Player do YouTube</h2>
            
            <div class="form-group">
                <label for="youtube-url">URL do YouTube</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="youtube-url" placeholder="Cole a URL do v√≠deo do YouTube aqui">
                    <button class="btn" id="load-video-btn"><i class="fas fa-play"></i> Carregar V√≠deo</button>
                </div>
            </div>
            
            <div class="youtube-player" id="youtube-player">
                <!-- Player do YouTube ser√° inserido aqui -->
            </div>
            
            <div class="player-container">
                <div class="player-info">
                    <div class="player-title" id="player-title">Nenhum v√≠deo carregado</div>
                    <div class="player-artist" id="player-artist">Cole uma URL do YouTube acima</div>
                </div>
                
                <div class="player-controls">
                    <button class="btn" id="play-btn"><i class="fas fa-play"></i> Reproduzir</button>
                    <button class="btn" id="pause-btn" style="display: none;"><i class="fas fa-pause"></i> Pausar</button>
                    <button class="btn btn-secondary" id="stop-btn"><i class="fas fa-stop"></i> Parar</button>
                    
                    <div class="volume-container">
                        <i class="fas fa-volume-up"></i>
                        <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="70">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-bullhorn"></i> Criar An√∫ncio</h2>
            <div class="form-group">
                <label for="announcement-name">Nome do An√∫ncio</label>
                <input type="text" id="announcement-name" placeholder="Ex: Promo√ß√£o de Ver√£o">
            </div>
            
            <div class="form-group">
                <label for="announcement-text">Texto do An√∫ncio</label>
                <textarea id="announcement-text" rows="3" placeholder="Digite o texto do an√∫ncio"></textarea>
            </div>
            
            <div class="audio-controls">
                <button class="btn" id="record-btn"><i class="fas fa-microphone"></i> Gravar √Åudio</button>
                <button class="btn btn-danger" id="stop-record-btn" disabled><i class="fas fa-stop"></i> Parar Grava√ß√£o</button>
                <button class="btn btn-warning" id="test-announcement-btn"><i class="fas fa-play-circle"></i> Testar An√∫ncio</button>
                <button class="btn btn-success" id="play-announcement-btn"><i class="fas fa-bullhorn"></i> Tocar An√∫ncio Agora</button>
            </div>
            
            <div class="test-panel" id="test-panel">
                <h3><i class="fas fa-vial"></i> Teste do An√∫ncio</h3>
                <p id="test-text">Texto do an√∫ncio aparecer√° aqui</p>
                <div class="btn-group">
                    <button class="btn btn-success" id="test-play-btn"><i class="fas fa-play"></i> Reproduzir Teste</button>
                    <button class="btn btn-secondary" id="test-stop-btn"><i class="fas fa-stop"></i> Parar Teste</button>
                    <button class="btn" id="close-test-btn"><i class="fas fa-times"></i> Fechar</button>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-list"></i> An√∫ncios Salvos</h2>
            <table id="announcements-table">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Texto</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="announcements-list">
                    <!-- Os an√∫ncios ser√£o inseridos aqui via JavaScript -->
                </tbody>
            </table>
        </div>
        
        <div class="card">
            <h2><i class="fas fa-cog"></i> Configura√ß√µes R√°pidas</h2>
            <div class="form-group">
                <label for="volume-control">Volume do Sistema</label>
                <input type="range" id="volume-control" min="0" max="100" value="70">
                <span id="volume-value">70%</span>
            </div>
            
            <div class="btn-group">
                <button class="btn" id="mute-btn"><i class="fas fa-volume-mute"></i> Silenciar</button>
                <button class="btn" id="unmute-btn"><i class="fas fa-volume-up"></i> Ativar Som</button>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>Sistema de An√∫ncios com YouTube &copy; 2023 - Controle total de √°udio</p>
        </div>
    </footer>

    <script>
        // Elementos do DOM
        const currentTimeEl = document.getElementById('current-time');
        const playingNowEl = document.getElementById('playing-now');
        const currentAudioEl = document.getElementById('current-audio');
        const announcementsListEl = document.getElementById('announcements-list');
        const volumeControlEl = document.getElementById('volume-control');
        const volumeValueEl = document.getElementById('volume-value');
        const recordBtn = document.getElementById('record-btn');
        const stopRecordBtn = document.getElementById('stop-record-btn');
        const testAnnouncementBtn = document.getElementById('test-announcement-btn');
        const playAnnouncementBtn = document.getElementById('play-announcement-btn');
        const testPanel = document.getElementById('test-panel');
        const testText = document.getElementById('test-text');
        const testPlayBtn = document.getElementById('test-play-btn');
        const testStopBtn = document.getElementById('test-stop-btn');
        const closeTestBtn = document.getElementById('close-test-btn');
        const loadVideoBtn = document.getElementById('load-video-btn');
        const youtubeUrlEl = document.getElementById('youtube-url');
        const youtubePlayerEl = document.getElementById('youtube-player');
        const playBtn = document.getElementById('play-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const playerTitle = document.getElementById('player-title');
        const playerArtist = document.getElementById('player-artist');
        const muteBtn = document.getElementById('mute-btn');
        const unmuteBtn = document.getElementById('unmute-btn');
        
        // Estado do sistema
        let isPlaying = false;
        let isMuted = false;
        let youtubePlayer = null;
        
        // Atualizar hora atual
        function updateCurrentTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit'
            };
            currentTimeEl.textContent = now.toLocaleDateString('pt-BR', options);
        }
        
        // Inicializar atualiza√ß√£o de hora
        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);
        
        // Controle de volume
        volumeControlEl.addEventListener('input', function() {
            volumeValueEl.textContent = `${this.value}%`;
            if (youtubePlayer) {
                youtubePlayer.setVolume(this.value);
            }
        });
        
        // Silenciar/Ativar som
        muteBtn.addEventListener('click', function() {
            isMuted = true;
            if (youtubePlayer) {
                youtubePlayer.mute();
            }
            volumeControlEl.disabled = true;
            alert("Sistema silenciado");
        });
        
        unmuteBtn.addEventListener('click', function() {
            isMuted = false;
            if (youtubePlayer) {
                youtubePlayer.unMute();
            }
            volumeControlEl.disabled = false;
            alert("Som ativado");
        });
        
        // Simula√ß√£o de grava√ß√£o de √°udio
        recordBtn.addEventListener('click', function() {
            recordBtn.disabled = true;
            stopRecordBtn.disabled = false;
            alert("Grava√ß√£o iniciada. Em um sistema real, isso gravaria √°udio do microfone.");
        });
        
        stopRecordBtn.addEventListener('click', function() {
            recordBtn.disabled = false;
            stopRecordBtn.disabled = true;
            alert("Grava√ß√£o parada. O √°udio est√° pronto para uso.");
        });
        
        // Testar an√∫ncio
        testAnnouncementBtn.addEventListener('click', function() {
            const name = document.getElementById('announcement-name').value;
            const text = document.getElementById('announcement-text').value;
            
            if (!name && !text) {
                alert("Digite pelo menos um nome ou texto para o an√∫ncio.");
                return;
            }
            
            testPanel.classList.add('active');
            testText.textContent = text || `Teste do an√∫ncio: ${name}`;
        });
        
        // Reproduzir teste
        testPlayBtn.addEventListener('click', function() {
            const text = document.getElementById('announcement-text').value;
            const name = document.getElementById('announcement-name').value;
            
            if (text) {
                // Em um sistema real, usaria a Web Speech API para sintetizar voz
                speakText(text);
                alert(`Reproduzindo teste: "${text}"`);
            } else if (name) {
                speakText(`Teste do an√∫ncio: ${name}`);
                alert(`Reproduzindo teste do an√∫ncio: ${name}`);
            }
        });
        
        // Fun√ß√£o para sintetizar voz (simula√ß√£o)
        function speakText(text) {
            if ('speechSynthesis' in window) {
                // Parar qualquer fala anterior
                window.speechSynthesis.cancel();
                
                // Criar nova fala
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'pt-BR';
                utterance.rate = 1;
                utterance.pitch = 1;
                utterance.volume = volumeControlEl.value / 100;
                
                window.speechSynthesis.speak(utterance);
            } else {
                alert("Seu navegador n√£o suporta s√≠ntese de voz. O texto seria: " + text);
            }
        }
        
        // Parar teste
        testStopBtn.addEventListener('click', function() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
            alert("Teste interrompido");
        });
        
        // Fechar painel de teste
        closeTestBtn.addEventListener('click', function() {
            testPanel.classList.remove('active');
        });
        
        // Tocar an√∫ncio agora
        playAnnouncementBtn.addEventListener('click', function() {
            const name = document.getElementById('announcement-name').value;
            const text = document.getElementById('announcement-text').value;
            
            if (!name && !text) {
                alert("Crie um an√∫ncio primeiro.");
                return;
            }
            
            // Pausar m√∫sica do YouTube se estiver tocando
            if (youtubePlayer && isPlaying) {
                youtubePlayer.pauseVideo();
                playBtn.style.display = 'inline-flex';
                pauseBtn.style.display = 'none';
                isPlaying = false;
            }
            
            // Tocar an√∫ncio
            const announcementText = text || `An√∫ncio: ${name}`;
            speakText(announcementText);
            
            // Mostrar na interface
            currentAudioEl.textContent = announcementText;
            playingNowEl.style.display = 'block';
            
            // Esconder ap√≥s alguns segundos (quando o an√∫ncio terminar)
            setTimeout(() => {
                playingNowEl.style.display = 'none';
                
                // Retomar m√∫sica se estava tocando antes
                if (youtubePlayer) {
                    youtubePlayer.playVideo();
                    playBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-flex';
                    isPlaying = true;
                }
            }, text.length * 150 + 3000); // Estimativa baseada no tamanho do texto
        });
        
        // Carregar v√≠deo do YouTube
        loadVideoBtn.addEventListener('click', function() {
            const url = youtubeUrlEl.value;
            if (!url) {
                alert("Cole uma URL do YouTube.");
                return;
            }
            
            // Extrair ID do v√≠deo da URL
            const videoId = extractYouTubeId(url);
            if (!videoId) {
                alert("URL do YouTube inv√°lida.");
                return;
            }
            
            // Carregar player do YouTube
            loadYouTubePlayer(videoId);
        });
        
        // Extrair ID do v√≠deo do YouTube
        function extractYouTubeId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : false;
        }
        
        // Carregar player do YouTube
        function loadYouTubePlayer(videoId) {
            // Limpar player anterior
            youtubePlayerEl.innerHTML = '';
            
            // Criar iframe do YouTube
            const iframe = document.createElement('iframe');
            iframe.width = "100%";
            iframe.height = "300";
            iframe.src = `https://www.youtube.com/embed/${videoId}?enablejsapi=1`;
            iframe.frameBorder = "0";
            iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
            iframe.allowFullscreen = true;
            
            youtubePlayerEl.appendChild(iframe);
            youtubePlayerEl.classList.add('active');
            
            // Inicializar API do YouTube
            window.onYouTubeIframeAPIReady = function() {
                youtubePlayer = new YT.Player(iframe, {
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
            };
            
            // Carregar API do YouTube se n√£o estiver carregada
            if (!window.YT) {
                const tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                const firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            } else {
                window.onYouTubeIframeAPIReady();
            }
            
            // Atualizar informa√ß√µes do player
            playerTitle.textContent = "V√≠deo do YouTube Carregado";
            playerArtist.textContent = "Controles habilitados";
        }
        
        // Quando o player estiver pronto
        function onPlayerReady(event) {
            // Definir volume inicial
            event.target.setVolume(volumeControlEl.value);
            console.log("Player do YouTube pronto");
        }
        
        // Quando o estado do player mudar
        function onPlayerStateChange(event) {
            // -1 (n√£o iniciado), 0 (terminado), 1 (reproduzindo), 2 (pausado), 3 (buffering), 5 (enfileirado)
            if (event.data === YT.PlayerState.PLAYING) {
                isPlaying = true;
                playBtn.style.display = 'none';
                pauseBtn.style.display = 'inline-flex';
                
                // Mostrar que est√° tocando
                currentAudioEl.textContent = "V√≠deo do YouTube";
                playingNowEl.style.display = 'block';
            } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                isPlaying = false;
                playBtn.style.display = 'inline-flex';
                pauseBtn.style.display = 'none';
                
                if (event.data === YT.PlayerState.ENDED) {
                    playingNowEl.style.display = 'none';
                }
            }
        }
        
        // Controles do player
        playBtn.addEventListener('click', function() {
            if (youtubePlayer) {
                youtubePlayer.playVideo();
            } else {
                alert("Carregue um v√≠deo do YouTube primeiro.");
            }
        });
        
        pauseBtn.addEventListener('click', function() {
            if (youtubePlayer) {
                youtubePlayer.pauseVideo();
            }
        });
        
        stopBtn.addEventListener('click', function() {
            if (youtubePlayer) {
                youtubePlayer.stopVideo();
                playingNowEl.style.display = 'none';
            }
        });
        
        // Controle de volume do player
        volumeSlider.addEventListener('input', function() {
            if (youtubePlayer) {
                youtubePlayer.setVolume(this.value);
            }
        });
        
        // Salvar an√∫ncio
        function saveAnnouncement() {
            const name = document.getElementById('announcement-name').value;
            const text = document.getElementById('announcement-text').value;
            
            if (!name) {
                alert("Digite um nome para o an√∫ncio.");
                return;
            }
            
            // Adicionar √† lista
            const newAnnouncement = {
                id: Date.now(),
                name,
                text
            };
            
            addAnnouncementToList(newAnnouncement);
            alert("An√∫ncio salvo com sucesso!");
        }
        
        // Adicionar an√∫ncio √† lista
        function addAnnouncementToList(announcement) {
            const row = document.createElement('tr');
            row.setAttribute('data-id', announcement.id);
            
            row.innerHTML = `
                <td>${announcement.name}</td>
                <td>${announcement.text || '-'}</td>
                <td class="actions">
                    <button class="btn" onclick="playSavedAnnouncement(${announcement.id})"><i class="fas fa-play"></i></button>
                    <button class="btn btn-warning" onclick="testSavedAnnouncement(${announcement.id})"><i class="fas fa-vial"></i></button>
                    <button class="btn btn-danger" onclick="deleteAnnouncement(${announcement.id})"><i class="fas fa-trash"></i></button>
                </td>
            `;
            
            announcementsListEl.appendChild(row);
        }
        
        // Reproduzir an√∫ncio salvo
        window.playSavedAnnouncement = function(id) {
            const row = document.querySelector(`tr[data-id="${id}"]`);
            const announcementName = row.querySelector('td:first-child').textContent;
            const announcementText = row.querySelector('td:nth-child(2)').textContent;
            
            // Pausar m√∫sica do YouTube se estiver tocando
            if (youtubePlayer && isPlaying) {
                youtubePlayer.pauseVideo();
                playBtn.style.display = 'inline-flex';
                pauseBtn.style.display = 'none';
                isPlaying = false;
            }
            
            // Tocar an√∫ncio
            const textToPlay = announcementText !== '-' ? announcementText : announcementName;
            speakText(textToPlay);
            
            // Mostrar na interface
            currentAudioEl.textContent = textToPlay;
            playingNowEl.style.display = 'block';
            
            // Esconder ap√≥s alguns segundos (quando o an√∫ncio terminar)
            setTimeout(() => {
                playingNowEl.style.display = 'none';
                
                // Retomar m√∫sica se estava tocando antes
                if (youtubePlayer) {
                    youtubePlayer.playVideo();
                    playBtn.style.display = 'none';
                    pauseBtn.style.display = 'inline-flex';
                    isPlaying = true;
                }
            }, textToPlay.length * 150 + 3000); // Estimativa baseada no tamanho do texto
        };
        
        // Testar an√∫ncio salvo
        window.testSavedAnnouncement = function(id) {
            const row = document.querySelector(`tr[data-id="${id}"]`);
            const announcementName = row.querySelector('td:first-child').textContent;
            const announcementText = row.querySelector('td:nth-child(2)').textContent;
            
            testPanel.classList.add('active');
            testText.textContent = announcementText !== '-' ? announcementText : `Teste do an√∫ncio: ${announcementName}`;
        };
        
        // Excluir an√∫ncio
        window.deleteAnnouncement = function(id) {
            if (confirm("Tem certeza que deseja excluir este an√∫ncio?")) {
                const row = document.querySelector(`tr[data-id="${id}"]`);
                if (row) {
                    row.remove();
                }
            }
        };
        
        // Adicionar evento de tecla Enter para salvar an√∫ncio
        document.addEventListener('keydown', function(e) {
            // Ctrl+Enter para salvar an√∫ncio
            if (e.ctrlKey && e.key === 'Enter') {
                saveAnnouncement();
            }
            
            // Espa√ßo para play/pause (apenas se n√£o estiver em um campo de texto)
            if (e.key === ' ' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                if (youtubePlayer) {
                    if (isPlaying) {
                        youtubePlayer.pauseVideo();
                    } else {
                        youtubePlayer.playVideo();
                    }
                }
            }
        });
        
        // Adicionar bot√£o de salvar an√∫ncio ao formul√°rio
        const announcementForm = document.querySelector('.card:nth-child(3)');
        const saveButton = document.createElement('button');
        saveButton.className = 'btn btn-success';
        saveButton.innerHTML = '<i class="fas fa-save"></i> Salvar An√∫ncio';
        saveButton.addEventListener('click', saveAnnouncement);
        
        const buttonGroup = announcementForm.querySelector('.btn-group');
        if (!buttonGroup) {
            const newButtonGroup = document.createElement('div');
            newButtonGroup.className = 'btn-group';
            newButtonGroup.appendChild(saveButton);
            announcementForm.querySelector('.audio-controls').after(newButtonGroup);
        } else {
            buttonGroup.appendChild(saveButton);
        }
        
        // Simula√ß√£o de an√∫ncios j√° existentes (para demonstra√ß√£o)
        const sampleAnnouncements = [
            {
                id: 1,
                name: "Promo√ß√£o de Inverno",
                text: "Aten√ß√£o, aten√ß√£o! Promo√ß√£o especial de inverno, todos os casacos com 30% de desconto!"
            },
            {
                id: 2,
                name: "Liquida√ß√£o de Ver√£o",
                text: "Liquida√ß√£o de ver√£o, camisetas e shorts com pre√ßos especiais. Aproveite!"
            },
            {
                id: 3,
                name: "Oferta do Dia",
                text: "Oferta especial do dia, apenas hoje com 50% de desconto em produtos selecionados."
            }
        ];
        
        // Adicionar an√∫ncios de exemplo √† lista
        sampleAnnouncements.forEach(announcement => {
            addAnnouncementToList(announcement);
        });
    </script>
</body>
</html>
